{"mappings":"A;EAwDE,CAAC,CAAC,CAAC,EAAE;IACH,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACd;EACA,EAAE;IACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAC5B;;A;EC0CA,CAAC,CAAC,CAAC,EAAE;IACH,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACd;EACA,EAAE;IACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAC5B","sources":["./src/pages/LoginPage.vue","./src/pages/RegisterPage.vue"],"sourcesContent":["<template>\n  <div class=\"py-4\">\n    <form v-on:submit=\"handleSubmit\" class=\"mx-auto border rounded p-4\" method=\"POST\" action=\"/users/login\" autocomplete=\"off\" novalidate>\n      <div class=\"mb-3\">\n        <label for=\"login\" class=\"form-label h5\">Login or Email</label>\n        <input type=\"text\" class=\"form-control\" name=\"login\" id=\"login\" />\n      </div>\n      <div class=\"mb-4\">\n        <label for=\"password\" class=\"form-label h5\">Password</label>\n        <input type=\"password\" class=\"form-control\" name=\"password\" id=\"password\" />\n      </div>\n      <button type=\"submit\" class=\"btn btn-primary w-100 mb-3\">Log in</button>\n      <div class=\"text-end\">\n        <router-link to=\"/register\">Sign up →</router-link>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nexport default {\n  methods: {\n    async handleSubmit(e) {\n      e.preventDefault();\n\n      const params = {\n        login: e.target.elements.login.value,\n        password: e.target.elements.password.value,\n      };\n\n      try {\n        const response = await fetch('/users/login', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(params),\n        });\n        const data = await response.json();\n\n        if (!response.ok) {\n          if (data.message) return alert(data.message);\n          throw Error(response.statusText);\n        }\n\n        localStorage.setItem('email', data.email);\n        localStorage.setItem('name', data.name);\n        localStorage.setItem('auth-token', data.token);\n        this.$router.push('/');\n      } catch (error) {\n        alert('Something went wrong :-(');\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n  form {\n    width: 320px;\n  }\n  a {\n    text-underline-offset: 3px;\n  }\n</style>\n","<template>\n  <div class=\"py-4\">\n    <form v-on:submit=\"handleSubmit\" class=\"mx-auto border rounded p-4\" method=\"POST\" action=\"/users/register\" autocomplete=\"off\" novalidate>\n      <div class=\"mb-3\">\n        <label for=\"email\" class=\"form-label h5\">Email</label>\n        <input type=\"email\" class=\"form-control\" name=\"email\" id=\"email\" />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"login\" class=\"form-label h5\">Login</label>\n        <input type=\"text\" class=\"form-control\" name=\"login\" id=\"login\" />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"real_name\" class=\"form-label h5\">Name</label>\n        <input type=\"text\" class=\"form-control\" name=\"real_name\" id=\"real_name\" />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"password\" class=\"form-label h5\">Password</label>\n        <input type=\"password\" class=\"form-control\" name=\"password\" id=\"password\" />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"birth_date\" class=\"form-label h5\">Birth date</label>\n        <input type=\"date\" class=\"form-control\" name=\"birth_date\" id=\"birth_date\" />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"country\" class=\"form-label h5\">Country</label>\n        <select class=\"form-select\" id=\"country\">\n          <option value=\"\">-- Please choose an country --</option>\n          <option v-for=\"country in countries\" v-bind:value=\"country.name\" v-bind:key=\"country.id\">{{ country.name }}</option>\n        </select>\n      </div>\n      <div class=\"mb-4 form-check\">\n        <input type=\"checkbox\" class=\"form-check-input\" name=\"is_agree\" id=\"is_agree\" />\n        <label for=\"is_agree\" class=\"form-check-label\">Agree with terms and conditions</label>\n      </div>\n\n      <button type=\"submit\" class=\"btn btn-primary w-100 mb-3\">Sign up</button>\n      <div class=\"text-end\">\n        <router-link to=\"/login\">Log in →</router-link>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      countries: [],\n    }\n  },\n  mounted() {\n    this.getCountries();\n  },\n  methods: {\n    async getCountries() {\n      try {\n        const response = await fetch('/users/register');\n        const data = await response.json();\n        if (!response.ok) { throw Error(response.statusText); }\n        this.countries = data.countries;\n      } catch (error) {\n        alert('Something went wrong :-(');\n      }\n    },\n    async handleSubmit(e) {\n      e.preventDefault();\n\n      const params = {\n        email: e.target.elements.email.value,\n        login: e.target.elements.login.value,\n        real_name: e.target.elements.real_name.value,\n        password: e.target.elements.password.value,\n        birth_date: e.target.elements.birth_date.value,\n        is_agree: e.target.elements.is_agree.checked,\n        country: e.target.elements.country.value,\n      };\n\n      try {\n        const response = await fetch('/users/register', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(params),\n        });\n        const data = await response.json();\n\n        if (!response.ok) {\n          if (data.message) return alert(data.message);\n          throw Error(response.statusText);\n        }\n\n        localStorage.setItem('email', data.email);\n        localStorage.setItem('name', data.name);\n        localStorage.setItem('auth-token', data.token);\n        this.$router.push('/');\n      } catch (error) {\n        alert('Something went wrong :-(');\n      }\n    },\n  },\n}\n</script>\n\n<style scoped>\n  form {\n    width: 480px;\n  }\n  a {\n    text-underline-offset: 3px;\n  }\n</style>\n"],"names":[],"version":3,"file":"index.4d27993d.css.map","sourceRoot":"../"}